// EnemyTank the specials
class EnemyTank extends Tank {
  float chaseDistance = 300;
  int shootDelay = 60;
  int lastShotTime = 0;

  EnemyTank(float startX, float startY, color c) {
    super(startX, startY, c);
  }

  void update(Tank player) {

    float d = dist(x, y, player.x, player.y);
    turretAngle = atan2(player.y - y, player.x - x);

    if (d < chaseDistance) {

      angle = turretAngle;
      movingForward = true;


      if (millis() > lastShotTime + shootDelay * (1000/frameRate)) {
        shoot();
        lastShotTime = millis();
      }
    } else {
      movingForward = false;
    }


    super.update();
  }


  void shoot() {

    bullets.add(new Bullet(x, y, turretAngle));
    lastShotTime = millis();

      // Recoil
      recoilOffset = recoilMax;

      // Muzzle flash 
      pushMatrix();
      translate(x, y);
      rotate(turretAngle);
      noStroke();
      fill(#F5C505);
      ellipse(size * 0.9, 0, 25, 25);
      fill(#F59905);
      ellipse(size * 0.9, 0, 15, 15);
      popMatrix();
  }
}
